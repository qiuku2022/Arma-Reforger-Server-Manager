import{d as b,o as w,c as l,b as t,F as y,r as f,e as $,w as E,i as O,m as B,f as m,h as c,n as N,t as v,g as P,_ as x}from"./index-DXihFc6l.js";import{B as K,C as R,D as T,E as D}from"./index-DGO2oQ2b.js";const I={class:"rcon-page"},M={class:"players-section card"},S={class:"players-container"},A={class:"player-info"},L={class:"player-name"},V={class:"player-id"},F={class:"player-time"},U={class:"player-actions"},z=["onClick","disabled"],H=["onClick"],j={key:0,class:"empty"},q={class:"console-section card"},G={class:"console-input"},J=b({__name:"Rcon",setup(Q){const o=m([]),i=m(""),r=m([]),d=m(null),h=s=>{if(!s||s<=0)return"--";const n=Math.floor(s/3600),e=Math.floor(s%3600/60);return`${n}h ${e}m`},k=()=>{P(()=>{d.value&&(d.value.scrollTop=d.value.scrollHeight)})},a=s=>{r.value.push(s),r.value.length>100&&(r.value=r.value.slice(-100)),k()},u=async()=>{try{const s=await K();Array.isArray(s)?o.value=s:(o.value=[],console.warn("Invalid players data:",s))}catch(s){console.error("Load players error:",s),o.value=[],a(`[Error] æ— æ³•èŽ·å–çŽ©å®¶åˆ—è¡¨: ${s}`)}},g=async s=>{if(!(!s||!confirm("ç¡®å®šè¦è¸¢å‡ºè¯¥çŽ©å®¶å—ï¼Ÿ")))try{await T(s),a(`[KICK] Player ${s} kicked`),await u()}catch(n){const e=n?.message||String(n);a(`[Error] è¸¢å‡ºå¤±è´¥: ${e}`)}},C=async s=>{if(!(!s||!confirm("ç¡®å®šè¦å°ç¦è¯¥çŽ©å®¶å—ï¼Ÿ")))try{await D(s),a(`[BAN] Player ${s} banned`),await u()}catch(n){const e=n?.message||String(n);a(`[Error] å°ç¦å¤±è´¥: ${e}`)}},_=async()=>{const s=i.value.trim();if(s)try{a(`> ${s}`);const e=(await R(s))?.response||"OK";a(e),i.value=""}catch(n){const e=n?.message||String(n);a(`[Error] ${e}`)}};return w(()=>{u()}),(s,n)=>(c(),l("div",I,[t("div",M,[t("div",{class:"card-header"},[n[1]||(n[1]=t("h3",{class:"section-title"},"ðŸ‘¥ çŽ©å®¶åˆ—è¡¨",-1)),t("button",{class:"btn-secondary",onClick:u},"ðŸ”„ åˆ·æ–°")]),t("div",S,[(c(!0),l(y,null,f(o.value,e=>(c(),l("div",{key:e.id,class:"player-item"},[t("span",{class:N(["status-dot",e.online?"status-online":"status-offline"])},null,2),t("div",A,[t("span",L,v(e.name||"Unknown"),1),t("span",V,"ID: "+v(e.id),1)]),t("span",F,v(h(e.online_time)),1),t("div",U,[t("button",{class:"btn-danger btn-sm",onClick:p=>g(e.id),disabled:!e.online},"è¸¢å‡º",8,z),t("button",{class:"btn-danger btn-sm",onClick:p=>C(e.id)},"æ‹‰é»‘",8,H)])]))),128)),!o.value||o.value.length===0?(c(),l("div",j," æš‚æ— çŽ©å®¶æ•°æ® ")):$("",!0)])]),t("div",q,[n[2]||(n[2]=t("h3",{class:"section-title"},"ðŸ’» RCON æŽ§åˆ¶å°",-1)),t("div",G,[E(t("input",{"onUpdate:modelValue":n[0]||(n[0]=e=>i.value=e),placeholder:"è¾“å…¥ RCON å‘½ä»¤...",onKeyup:B(_,["enter"])},null,544),[[O,i.value]]),t("button",{class:"btn-primary",onClick:_},"å‘é€")]),t("div",{class:"console-output",ref_key:"consoleOutputEl",ref:d},[(c(!0),l(y,null,f(r.value,(e,p)=>(c(),l("div",{key:p,class:"console-line"},v(e),1))),128))],512)])]))}}),Y=x(J,[["__scopeId","data-v-adc9cff7"]]);export{Y as default};
