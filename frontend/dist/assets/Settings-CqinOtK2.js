import{d as y,u as C,o as M,c as V,a as s,e as n,v as r,n as g,t as d,w as A,s as U,g as i,r as k,p as x,h as R,f as D,_ as I}from"./index-Dykq_D_Y.js";import{n as B,a as P,b as q,g as N,o as T}from"./index-DGO2oQ2b.js";const W={class:"settings-page"},z={class:"card"},E={class:"form-group"},F={class:"path-input"},O={class:"path-hint"},j={class:"form-group"},G={class:"path-input"},H={class:"path-hint"},J={class:"card"},K={class:"form-group"},L={class:"form-group"},Q={class:"form-group"},X={class:"form-actions"},Y=["disabled"],Z=y({__name:"Settings",setup($){const m=C(),w=D(),l=i({steamcmd_path:"",server_path:"",default_preset:""}),o=k({new_username:"",old_password:"",new_password:""}),u=i(!1),p=i(!1),c=i(!1),v=i(""),f=x(()=>v.value==="windows"),h=async()=>{try{const t=await B();l.value=t}catch(t){console.error(t)}},_=async()=>{try{const[t,e,a]=await Promise.all([P(),q(),N()]);p.value=t.installed,c.value=e.installed,v.value=a.os}catch(t){console.error(t)}},b=async()=>{try{await T(l.value),alert("è®¾ç½®å·²ä¿å­˜")}catch(t){alert(t.message)}},S=async()=>{u.value=!0;try{await m.changePasswordWithUsername(o.old_password,o.new_password,o.new_username)&&(alert("è´¦å·ä¿¡æ¯å·²æˆåŠŸæ›´æ–°ï¼Œè¯·é‡æ–°ç™»å½•"),m.clearAuth(),w.push("/login"))}catch(t){alert(t.message||"æ›´æ–°å¤±è´¥")}finally{u.value=!1}};return M(()=>{h(),_()}),(t,e)=>(R(),V("div",W,[s("div",z,[s("div",{class:"card-header"},[e[5]||(e[5]=s("h3",{class:"section-title"},"ğŸ“‚ å®‰è£…è·¯å¾„",-1)),s("button",{class:"btn-secondary",onClick:_},"ğŸ”„ æ£€æµ‹çŠ¶æ€")]),s("div",E,[e[6]||(e[6]=s("label",{class:"form-label"},"SteamCMD è·¯å¾„",-1)),s("div",F,[n(s("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>l.value.steamcmd_path=a)},null,512),[[r,l.value.steamcmd_path]]),s("span",{class:g(["status-indicator",p.value?"installed":"not-installed"])},d(p.value?"âœ“ å·²å®‰è£…":"âœ— æœªå®‰è£…"),3)]),s("p",O,d(f.value?"ç¤ºä¾‹: C:\\steamcmd":"ç¤ºä¾‹: /home/user/steamcmd"),1)]),s("div",j,[e[7]||(e[7]=s("label",{class:"form-label"},"æ¸¸æˆæœåŠ¡ç«¯è·¯å¾„",-1)),s("div",G,[n(s("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>l.value.server_path=a)},null,512),[[r,l.value.server_path]]),s("span",{class:g(["status-indicator",c.value?"installed":"not-installed"])},d(c.value?"âœ“ å·²å®‰è£…":"âœ— æœªå®‰è£…"),3)]),s("p",H,d(f.value?"ç¤ºä¾‹: C:\\ArmaReforgerServer":"ç¤ºä¾‹: /home/user/arma-reforger-server"),1)]),s("div",{class:"form-actions"},[s("button",{class:"btn-primary",onClick:b},"ä¿å­˜è®¾ç½®")])]),s("div",J,[e[11]||(e[11]=s("h3",{class:"section-title"},"ğŸ” è´¦å·å®‰å…¨",-1)),s("form",{onSubmit:A(S,["prevent"]),class:"password-form"},[s("div",K,[e[8]||(e[8]=s("label",{class:"form-label"},"ä¿®æ”¹ç”¨æˆ·å (å¯é€‰)",-1)),n(s("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>o.new_username=a),placeholder:"ç•™ç©ºåˆ™ä¿æŒä¸å˜"},null,512),[[r,o.new_username]])]),s("div",L,[e[9]||(e[9]=s("label",{class:"form-label"},"å½“å‰å¯†ç ",-1)),n(s("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>o.old_password=a),type:"password",required:""},null,512),[[r,o.old_password]])]),s("div",Q,[e[10]||(e[10]=s("label",{class:"form-label"},"æ–°å¯†ç ",-1)),n(s("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>o.new_password=a),type:"password",required:"",minlength:"6"},null,512),[[r,o.new_password]])]),s("div",X,[s("button",{type:"submit",class:"btn-primary",disabled:u.value},d(u.value?"æ›´æ–°ä¸­...":"æ›´æ–°è´¦å·ä¿¡æ¯"),9,Y)])],32)]),e[12]||(e[12]=s("div",{class:"card"},[s("h3",{class:"section-title"},"â„¹ï¸ å…³äº"),s("div",{class:"about-info"},[s("p",null,[s("strong",null,"ARSM"),U(" - Arma Reforger Server Manager")]),s("p",null,"ç‰ˆæœ¬: 1.0.0"),s("p",null,"ä¸€æ¬¾è½»é‡çº§çš„ Arma Reforger æœåŠ¡å™¨ç®¡ç†å·¥å…·")])],-1))]))}}),ts=I(Z,[["__scopeId","data-v-4f3d2440"]]);export{ts as default};
